{% extends "tennis/staff.html" %}

{% block title %}Gestion des tournois{% endblock %}
{% block ongTournoi %}class="active"{% endblock %}

{% block bodyStaff %}
<!-- Gestionnaire des groupes -->
<div class="content-box" id="gestionTournoi">
    <h2 class="center">Gestionnaire des tournois</h2>
    <hr class="line">
    
    <div class="panel panel-default center-block" style="max-width:90%;">
        <div class="panel-heading">Tournois</div>
        <div class="table-responsive">
            <table class="table table-hover">
                <thead>
                  <tr>
                    <th>Nom</th>
                    <th style="text-align:center">Jour</th>
                    <th>Descriptions</th>
                    <th style="text-align:center">Paires</th>
                    <th style="text-align:center">Status</th>
                  </tr>
                </thead>
                <tbody>
                    {% for tournoi in allTournoi %}
                    <tr class="clickable-row" onclick="location.href='{% url "tennis.views.generatePool" tournoi.nom %}';">
                        <td style="width:18%;vertical-align: middle;">{{ tournoi.nom }}</td>
                        <td style="text-align:center;vertical-align: middle;">{{ tournoi.jour }}</td>
                        <td>{{ tournoi.description }}</td>
                        <td style="text-align:center;vertical-align: middle;">{{ tournoi.np }}</td>
                        <td style="text-align:center;vertical-align: middle;">{{ tournoi.status }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <div class="row">
        {% for tournoi in allTournoi %}
        <div class="col-sm-6">
            <div class="panel panel-default">
                <div class="panel-heading">{{ tournoi.nom }} ({{tournoi.jour}})</div>
                <div class="list-group">
                    {% for key, value in allPoules.items %}
                        {% if key == tournoi.nom %}
                            {% for p in value %}
                            <a class="list-group-item" href="{% url "tennis.views.pouleScore" p.id %}">
                                <b>Leader : </b>{{p.leader.participant.prenom}} {{p.leader.participant.nom}}
                                <br>
                                <b>Participant : </b> (TODO afficher les scores ? )<br>
                                {% for pair in p.paires.all %}
                                <b>{{ pair.id }}</b> - 
                                {{ pair.user1.participant.prenom }} {{ pair.user1.participant.nom }} &#38; 
                                {{ pair.user2.participant.prenom }} {{ pair.user2.participant.nom }}
                                <br>
                                {% endfor %}
                            </a>
                            {% empty %}
                            <div class="list-group-item">Il n'y a pas encore de poules enregistr√©es pour ce tournoi</div>
                            {% endfor %}
                        {% endif %}
                    {% endfor %}
                </div>
                <div class="panel-footer">
                    <button onclick="location.href='{% url "tennis.views.knockOff" tournoi.nom %}';" class="btn btn-default center-block">Knock-Out Table</button>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

{% endblock %}
    