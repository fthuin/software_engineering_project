{% extends "tennis/staff.html" %}

{% block title %}Knock Off : {{tournoi.nom}}{% endblock %}
{% block ongTournoi %}class="active"{% endblock %}

{% block bodyStaff %}
<!-- Gestionnaire des groupes -->
<div class="content-box" id="gestionTournoi">
    <h2 class="center">Knock Out : {{tournoi.nom}}</h2>
    <hr class="line">
    <!--
    <div class="panel panel-default">
        <div class="panel-heading">Poules</div>
        <div class="table-responsive">
            <table class="table table-hover">
                <thead>
                  <tr>
                    {% for p in poules %}
                    <th>Poule {{p.id}}</th>
                    {% endfor %}
                  </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </div>
  -->

    <!-- Div qui va contenir notre arbre -->
    <div class="table-responsive">
      <div class="center-block" id="my_gracket"></div>
    </div>

    </div>
</div>

<!-- Modal -->
  <div class="modal fade" id="scoreModal" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title center">Score</h4>
        </div>
        <div class="modal-body">
          <form class="form-horizontal" action="">
            <p class="hint center" id="hintScore"></p>
            <!-- Equipe 1 -->
            <div class="form-group">
              <label class="control-label col-sm-7" for="team1" id="formteam1">Team 1</label>
              <div class="col-sm-2">
                <input type="number" class="form-control" id="inputTeam1" name="team1" style="text-align:center;" >
              </div>
            </div>

            <!-- Equipe 2 -->
            <div class="form-group">
              <label class="control-label col-sm-7" for="team2" id="formteam2">Team 2</label>
              <div class="col-sm-2">
                <input type="number" class="form-control" id="inputTeam2" name="team2" style="text-align:center;">
              </div>
            </div>

            <!-- Emplacement du match -->
            <input type="text" id="emplacement" style="display:none;">
          </form>
        
        <ul class="list-inline text-center">
        <li>
          <button type="button" class="btn btn-default" onclick="setScore()">Confirmer</button>
        </li>
        <li>
          <button type="button" class="btn btn-default" data-dismiss="modal">Annuler</button>
        </li>
      </ul>
    </div>
      </div>
      
    </div>
  </div>

{% endblock %}

{% block commande %}
{% load static from staticfiles %}
<script src="{% static 'tennis/js/knockOut.js' %}" type="text/javascript"></script>

<script type="text/javascript">

//-----------------------------------------------------------------------------------------------------------------------------
//TEST SECTION
//-----------------------------------------------------------------------------------------------------------------------------
//Creation d'une liste de pair
var listPair = [];

for (var i = 0; i < 8; i++) {
  var p = i%2
  var po = i%5
  var Pair = {user1:"Jean Michel"+i, user2:"Jean Pierre"+i,pos:p, pool:po, id:100+i};
  listPair.push(Pair);
};

//sort de la liste en fonction du rang
listPair.sort(function(a, b) { 
  var r = a.pos - b.pos;
  if(r==0){
    r = a.pool - b.pool;
  }
  return r;
});

//Les joueurs 1 (taille 8)
var leftSide = listPair.splice(0,4);

setTree(leftSide,listPair);

</script>

{% endblock %}
    