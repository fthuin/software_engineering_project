\chapter{Hiérarchie des dossiers de contenus}

Tout d'abord, il est important de savoir qu'un projet Django se sépare en
plusieurs parties. Une partie est destiné à l'entièreté des paramètres et
des outils liés à tout le site, les autres parties sont des
\enquote{applications}. \newline

Ces \enquote{applications} ont pour but d'être modulaire, c'est-à-dire qu'elles
peuvent s'intégrer facilement dans d'autres projets Django. Dans notre cas,
il n'existe qu'une seule application : \textbf{tennis}. Elle est autonome et
gère à la fois le visuel du site et les opérations sur le serveur. \newline

Vous pouvez retrouver la hiérarchie des dossiers sur la
figure~\ref{fig:Architecture des dossiers} 

La structure des différents dossiers faisant partie du projet est la suivante:

\begin{figure}[!ht]
	\begin{framed}
		\dirtree{%
			.1 /.
			.2 \textbf{ASMAE} \ldots{} \begin{minipage}[t]{10cm}
								Ce répertoire contient les fichiers directement
								reliés aux paramètres généraux du projet web{.}
								\end{minipage}.
			.2 \textbf{tennis} \ldots{} \begin{minipage}[t]{10cm}
								Ce répertoire contient tous les fichiers reliés
								à l'application \enquote{tennis}, c'est-à-dire
								tous les contenus reliés au Charles de
								Lorraine{.}
								\end{minipage}.
			.3 \textbf{dump\_table} \ldots{} \begin{minipage}[t]{10cm}
									Ce répertoire contient les fichiers
									permettant de sortir des {.}csv depuis
									l'interface admin{.}
									\todo[inline]{Référencer la partie /admin}
									\end{minipage}.
			.3 \textbf{management}.
			.4 \textbf{commands} \ldots{} \begin{minipage}[t]{10cm}
									Ce répertoire contient les fichiers
									permettant de créer des nouvelles commandes
									à lancer avec manage{.}py
									\end{minipage}.
			.3 \textbf{static}.
			.4 \textbf{tennis}.
			.5 \textbf{css} \ldots{} \begin{minipage}[t]{10cm}
									Ce répertoire contient les fichiers
									permettant de gérer l'affichage du site
									web{.}
									\end{minipage}.
			.5 \textbf{fonts} \ldots{} \begin{minipage}[t]{10cm}
									Ce répertoire contient les fichiers
									permettant de gérer les polices d'écriture{.}
									\end{minipage}.
			.5 \textbf{img} \ldots{} \begin{minipage}[t]{10cm}
									Ce répertoire contient les fichiers
									images utiles au site{.}
									\end{minipage}.
			.5 \textbf{js} \ldots{} \begin{minipage}[t]{10cm}
									Ce répertoire contient les fichiers
									permettant au navigateur d'effectuer des
									actions sans interaction avec le serveur{.}
									\end{minipage}.
			.6 \textbf{images}.
			.3 \textbf{templates} \ldots{} \begin{minipage}[t]{10cm}
									Ce répertoire contient les fichiers
									HTML nécessaires à l'affichage des pages
									de l'application{.}
									\end{minipage}.
			.4 \textbf{mail}.
			.3 \textbf{tests\_cases}.
			.3 \textbf{views\_helper} \ldots{} \begin{minipage}[t]{10cm}
									Ce répertoire contient les fichiers
									Python permettant de gérer les interactions
									du site avec le serveur{.}
									\end{minipage}.
		}
	\end{framed}
	\caption{Arbre décrivant l'architecture depuis le dossier racine}
	\label{fig:Architecture des dossiers}
\end{figure}
\FloatBarrier

Le répertoire du projet se sépare en 3 sous-dossiers :

\begin{itemize}
\item un dossier \enquote{ASMAE} contenant les fichiers propres à la création
du site web ;
\item un dossier "Latex" contenant les différents rapports intermédiaires
remis lors de la période de développement,
\item et un dossier "Documentation" contenant les textes et images faisant
parties de l'aide à l'utilisation du site.
\end{itemize}

\begin{figure}[H]
\centering
\includegraphics[scale=0.35]{Repository.png}
\caption{Architecture du répertoire}
\end{figure}

\begin{figure}[H]
\centering
\includegraphics[scale=0.35]{Documentation.png}
\caption{Documentation}
\end{figure}

\begin{figure}[H]
\centering
\includegraphics[scale=0.35]{Latex.png}
\caption{Dossier Latex}
\end{figure}

Dossier ASMAE:\\

A l'ouverture de ce dossier, on retrouve à nouveaux deux sous-dossiers :\\

\begin{itemize}
	\item le dossier "ASMAE" contient  la base de données ainsi que trois fichiers se rapportant à la configuration de Django (settings.py pour les options de Django, urls.py pour lier les views aux templates et wsgi.py pour définir l'application web),
	\item le dossier "tennis" contenant l'ensemble des ressources du site internet. On y retrouve également plusieurs fichiers :
	\item un fichier manage.py permettant d'interragir directement avec l'application (lancer le site web, créer un superuser, effectuer les migrations de la base de données, …),
	\item deux fichiers textes (res\_femmes.csv et res\_hommes.csv) reprenant les informations des utilsateurs hommes et femmes utilisés pour populer la base de données,
	\item et un fichier exécutable phantom.js utilisé quant à lui pour la gestion des envois d'email du site web.
\end{itemize}

\begin{figure}[H]
\centering
\includegraphics[scale=0.35]{Asmae1.png}
\caption{Dossier Asmae 1}
\end{figure}
\vspace{-5cm}
\begin{figure}[H]
\centering
\includegraphics[scale=0.35]{Asmae2.png}
\caption{Dossier Asmae 2}
\end{figure}

Dossier tennis :\\

C'est dans ce dossier que se trouvent toutes les ressources principales du projet. On y retrouve les dossiers suivants :
\begin{itemize}
	\item le dossier "dump\_table" qui reprend le code permettant de transférer les différents terrains (courts.py) et joueurs (participant.py) de la base de données vers des fichiers texte (.csv),
	\item le dossier "management" qui reprend le code de tous les formulaires utilisés sur le site (dans le sous-dossier "commands") ainsi que deux fichiers texte (.csv) contenant les utilisateurs hommes et femmes utilisés pour populer la base de données et un fichier contenant le code permettant de créer un utilisateur aléatoire (random\_people.py),
	\item le dossier "migrations", contenant toutes les migrations effectuées de la base de données,
	\item le dossier "static" contenant toutes les ressources statiques utilisées par le site web (les fichiers css, les polices, les images et le code javascript),
	\item le dossier "templates" contenant toutes les pages HTML du site ainsi que les templates utilisés pour les mails des membres du staff (dans le sous-dossier "mails"),
	\item et le dossier "views\_helper" qui reprend l'implémentation de certaines views particulières (comme l'encodage par un utilisateur de ses points dans la poule, ou encore d'accepter ou de refuser une demande d'un autre utilisateur pour former une paire).\\
\end{itemize}

On retrouve également les fichiers suivants :\\

\begin{itemize}
	\item le fichier admin.py qui contient le code définissant les différentes classes des administrateurs (administrateur s'occupant des tournois, des terrains, ...) ainsi que leurs attributs, utilisés pour créer les tables dans la base de données,
	\item le fichier classement.py qui contient le code permettant de faire le classement des différents participants dans les poules,
	\item le fichier forms.py qui contient le formulaire de connexion au site,
	\item le fichier mail.py qui contient le code nécessaire à l'envoi des différents types de mails (confirmation d'enregistrement, paiement, ...) du site,
	\item le fichier models.py qui contient le code définissant les différentes classes (participant, terrain, ...) ainsi que leurs attributs, utilisés pour créer les tables dans la base de données,
	\item le fichier pdfdocument.py qui contient le code utilisé pour la transformation des pages du site en fichier pdf imprimable,
	\item le fichier tests.py qui contient les différents tests des fonctionnalités du site que nous avons implémentés,
	\item le fichier urls.py qui contient toutes les URL disponibles sur le site, et leurs liens vers les views contenues dans le fichier views.py
	\item et le fichier views.py qui contient l'ensemble des views présentes sur le site.
\end{itemize}

\begin{figure}[H]
\centering
\includegraphics[scale=0.35]{tennis.png}
\caption{Dossier tennis}
\end{figure}
